<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<script src="js/jquery-2.1.3.min.js"></script>
<link rel="stylesheet" href="css/sample.css">
<title>ãƒ­ã‚±ãƒãƒ³ï¼æ˜Ÿç©ºè¦³æœ›ä¼š</title>
</head>
<header>
    <h1><img src="img/profile.jpg" width="150">ã€€ã€€ã€€ã€€ã€€ãƒ­ã‚±ãƒãƒ³ï¼æ˜Ÿç©ºè¦³æœ›ä¼šã€€ã€€ã€€ã€€ã€€<img src="img/profile.jpg" width="150"></h1>
</header>
<body>  
<h2>æ‹…å½“ã‚°ãƒ«ãƒ¼ãƒ—åˆ†ã‘ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ</h2>
<div class="wrapper">
    <div id="result" class="result"></div>
    <ul id="number" class="number">
    </ul>
    <p>01ç•ª-05ç•ªã€€ğŸ”­æœ›é é¡ã§ã®ã”æ¡ˆå†…ï¼ˆæœˆğŸŒ•ã€æ’æ˜ŸğŸŒŒã€æƒ‘æ˜Ÿï¼‰</p>
    <p>05ç•ª-08ç•ªã€€ğŸŒŸæ˜Ÿã®ãŠã¯ãªã—ä¼šï¼ ãƒ†ãƒ³ãƒˆğŸª</p>
    <p>09ç•ª-10ç•ªã€€ğŸ‘€åŒçœ¼é¡ã§ã®ã”æ¡ˆå†…</p>
    <div class="wrapper-button">
      <button id="button" class="button">START</button>
    </div>             
<audio id="sound-play" preload="auto">
<!-- <source src="start.mp3" type="audio/mp3"> -->
</audio>
<audio id="sound-pause" preload="auto">
<!-- <source src="pause.mp3" type="audio/mp3"> -->
</audio>  
<audio id="sound-play" preload="auto">
<!-- <source src="start.mp3" type="audio/mp3"> -->
</audio>
<audio id="sound-pause" preload="auto">
<!-- <source src="pause.mp3" type="audio/mp3"> -->
</audio>
</div>
</main>  
<style>html,body{height:100%;}body{padding:0;margin:0;}h1{padding:0;margin:0;font-size:100%;}</style>
<!-- MAP[START] -->
<h2>ä»Šå›ã®ãƒ­ã‚±ãƒãƒ³ï¼šä»£ã€…æœ¨å…¬åœ’</h2>
<div id="myMap" style='width:120%;height:140%;float:center;'></div>
<!-- MAP[END] -->
<script src='https://www.bing.com/api/maps/mapcontrol?callback=GetMap&key=[ *** YOUR MY KEY *** ]' async defer></script>
<script src="../js/BmapQuery.js"></script>
<script>
//****************************************************************************************
// BingMaps&BmapQuery
//****************************************************************************************
//Init
function GetMap(){
    //------------------------------------------------------------------------
    //1. Instance
    //------------------------------------------------------------------------
    const map = new Bmap("#myMap");

    //------------------------------------------------------------------------
    //2. Display Map
    //   startMap(lat, lon, "MapType", Zoom[1~20]);
    //   MapType:[load, aerial,canvasDark,canvasLight,birdseye,grayscale,streetside]
    //--------------------------------------------------
    map.startMap(35.6716486, 139.6952259, "load", 10);
//ã“ã“ã‹ã‚‰æ§‹æˆã—ãŸã„ã‚‚ã®ã‚’å…¥ã‚Œã¦ã„ã

  //----------------------------------------------------
    //3. Add Pushpin-Center
    // pin(lat, lon, "color", [drag:true|false], [click:true|false], [hover:true|false], [visible:true|false]);
    //----------------------------------------------------
    const lat = map.getLat(); //Get MapCenter latitude
    const lon = map.getLon(); //Get MapCenter longitude
    let pin = map.pin(lat, lon, "#ff0000"); //Pushpin
    //----------------------------------------------------

    //ï¼‘ï¼”. MapChangeView
    //   ex1)changeMap(lat, lon, "MapType");
    //   ex2)changeMap(lat, lon, "MapType", Zoom[1~20]);
    //   "MapType":[load,aerial,canvasDark,canvasLight,birdseye,grayscale,streetside]
    //----------------------------------------------------
    // ex1) after 3 seconds.
    setTimeout(function(){
        map.changeMap(35.6716486, 139.6952259, "birdseye");
    },3000);

    // ex2) after 6 seconds.
    setTimeout(function(){
        map.changeMap(35.6716486, 139.6952259, "canvasDark", 17);
    },6000);

}
</script>
<style>
    #view{
        padding: 10px;
        border: 4px solid #6f28bb;
        width: 50%px;
        background-color: aliceblue;
        height:500px;
        overflow: auto;
    }
    img{
        width:50px;
    }
    #view>div{
        border-bottom: 1px dotted #3838ab;
        font-size:medium;
    }
    .bold{
        font-weight: bold;
    }
    h2{padding:0;margin:0;font-size:100%;
    }
</style>
<p>
<div>
    <h2>
       <span id="area"></span> å¤©æ°—5æ—¥é–“ï¼
    </h2>
    <div id="view">

    </div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
<script>
    //ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼
    //MAPè¡¨ç¤ºå‡¦ç†
    //ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼
    const key   = "3b62cabb9797c33876e4321f02b19d13";  //***è‡ªåˆ†ã®KEYã‚’ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼***
    const lat   = "35.6716486";   //ä»£ã€…æœ¨å…¬åœ’ã®ç·¯åº¦
    const lon   = "139.6952259";  //ä»£ã€…æœ¨å…¬åœ’ã®ã®è»½åº¦
    const icon  = "http://openweathermap.org/img/wn/"; //ICONã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹URL

    //ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼
    //OpenWeatherAPIï¼ˆå¤©æ°—æƒ…å ±ã‚’å–å¾—ï¼‰5DAY/3hour
    //ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼
    const url = 'https://api.openweathermap.org/data/2.5/forecast?lat='+lat+'&lon='+lon+'&appid='+key+'&lang=ja';
//    é€šä¿¡ãŒæˆåŠŸã—ãŸã‚‰ã—ä¸‹ã®ä¸­ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã€‚URLã¯è¨­å®šã©ã“ã«ã„ãã®ã‹ï¼Ÿ
    $.ajax({
        url:url, //ã©ã“ã®è¨­å®šã‹ã‚‰æ‹¾ã†ã®ã‹
        type: 'get', //é€šä¿¡ã®æ–¹æ³•ã¯ï¼Ÿget /post
        cache: false, 
        dataType: 'json'
    }).done(function(data){
        // console.log(data.list[0].dt_txt);//ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå¤‰æ•°ã‚’ç¢ºèª console object ã®ï¼ç•ªã®dt_txtã‚’å³ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚³ãƒ”ãƒ¼ã—ã¦è²¼ã‚Šä»˜ã‘
        console.log(data);
        
        let html="";
        for(let i=0; i<data.list.length; i++){
// æ—¥ä»˜ã ã‘è¡¨ç¤ºã•ã›ã‚‹
            html+= `
            <div>
                <div>æ—¥æ™‚ï¼š${data.list[i].dt_txt}</div> 
                <div>é¢¨é€Ÿï¼š${data.list[i].wind.speed}</div> 
                <div>ç©ºæ¨¡æ§˜ï¼š${data.list[i].weather[0].description}</div>  
                <div>é™æ°´ç¢ºç‡(%)ï¼š${data.list[i].pop*100}</div>  
                <div><img src= "${icon+data.list[0].weather[0].icon}@2x.png"></div>  
            </div>
             `;
        }

// ä¸Šã§ä½œæˆã—ãŸHTMLåŸ‹ã‚è¾¼ã‚€
        $("#view").append(html);
// å ´æ‰€
        $("#area").html(data.city.name);
            
    });

// yoyogi koen 35.672254, 139.694552
</script>
<script>
$(function(){
  "use strict";
  var
    max = 10,
    bingo = [],
    status = true,
    roulette,
    random,
    number,
    result,
    $number = $("#number"),
    $result = $("#result"),
    $sound_play = $("#sound-play"),
    $sound_pause = $("#sound-pause");
    for(var i = 1; i <= max; i++) {
    bingo.push(i);
    $number.append($("<li>").text(("0" + i).slice(-2)));
  }

  $("#button").on("click", function(){
    if(status) {
      status = false;
      $(this).text("STOP");
      $sound_play.trigger("play");
      $sound_pause.trigger("pause");
      $sound_pause[0].currentTime = 0;

      roulette = setInterval(function(){
        random = Math.floor(Math.random() * bingo.length);
        number = bingo[random];
        $result.text(number);
      }, 10);
    } else {
      status = true;
      $(this).text("START");
      $sound_pause.trigger("play");
      $sound_play.trigger("pause");
      $sound_play[0].currentTime = 0;

      clearInterval(roulette);

      result = bingo[random];
      bingo.splice(random, 1);
      $result.text(result);
      $number.find("li").eq(parseInt(result, 10) - 1).addClass("hit");
    }
  });
});
</script>
</body>
</html>
